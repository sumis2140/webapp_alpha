{"ast":null,"code":"// ag-grid-react v27.1.0\n\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __spreadArrays = this && this.__spreadArrays || function () {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n\n  return r;\n};\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result[\"default\"] = mod;\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = __importStar(require(\"react\"));\n\nvar ag_grid_community_1 = require(\"ag-grid-community\");\n\nvar jsComp_1 = require(\"../jsComp\");\n\nvar utils_1 = require(\"../utils\");\n\nvar beansContext_1 = require(\"../beansContext\");\n\nvar cellComp_1 = __importDefault(require(\"../cells/cellComp\"));\n\nvar maintainOrderOnColumns = function maintainOrderOnColumns(prev, next, domOrder) {\n  if (domOrder) {\n    var res_1 = {\n      list: next,\n      instanceIdMap: new Map()\n    };\n    next.forEach(function (c) {\n      return res_1.instanceIdMap.set(c.getInstanceId(), c);\n    });\n    return res_1;\n  } // if dom order not important, we don't want to change the order\n  // of the elements in the dom, as this would break transition styles\n\n\n  var oldCellCtrls = [];\n  var newCellCtrls = [];\n  var newInstanceIdMap = new Map();\n  var tempMap = new Map();\n  next.forEach(function (c) {\n    return tempMap.set(c.getInstanceId(), c);\n  });\n  prev.list.forEach(function (c) {\n    var instanceId = c.getInstanceId();\n\n    if (tempMap.has(instanceId)) {\n      oldCellCtrls.push(c);\n      newInstanceIdMap.set(instanceId, c);\n    }\n  });\n  next.forEach(function (c) {\n    var instanceId = c.getInstanceId();\n\n    if (!prev.instanceIdMap.has(instanceId)) {\n      newCellCtrls.push(c);\n      newInstanceIdMap.set(instanceId, c);\n    }\n  });\n  var res = {\n    list: __spreadArrays(oldCellCtrls, newCellCtrls),\n    instanceIdMap: newInstanceIdMap\n  };\n  return res;\n};\n\nvar RowComp = function RowComp(params) {\n  var context = react_1.useContext(beansContext_1.BeansContext).context;\n  var rowCtrl = params.rowCtrl,\n      containerType = params.containerType;\n\n  var _a = react_1.useState(),\n      rowIndex = _a[0],\n      _setRowIndex = _a[1];\n\n  var _b = react_1.useState(),\n      rowId = _b[0],\n      _setRowId = _b[1];\n\n  var _c = react_1.useState(),\n      role = _c[0],\n      _setRole = _c[1];\n\n  var _d = react_1.useState(),\n      rowBusinessKey = _d[0],\n      _setRowBusinessKey = _d[1];\n\n  var _e = react_1.useState(),\n      tabIndex = _e[0],\n      _setTabIndex = _e[1];\n\n  var _f = react_1.useState(),\n      userStyles = _f[0],\n      _setUserStyles = _f[1];\n\n  var _g = react_1.useState({\n    list: [],\n    instanceIdMap: new Map()\n  }),\n      cellCtrls = _g[0],\n      _setCellCtrls = _g[1];\n\n  var _h = react_1.useState(),\n      fullWidthCompDetails = _h[0],\n      setFullWidthCompDetails = _h[1];\n\n  var _j = react_1.useState(false),\n      domOrder = _j[0],\n      _setDomOrder = _j[1]; // these styles have initial values, so element is placed into the DOM with them,\n  // rather than an transition getting applied.\n\n\n  var _k = react_1.useState(rowCtrl.getInitialRowTop()),\n      top = _k[0],\n      _setTop = _k[1];\n\n  var _l = react_1.useState(rowCtrl.getInitialTransform()),\n      transform = _l[0],\n      _setTransform = _l[1];\n\n  var eGui = react_1.useRef(null);\n  var fullWidthCompRef = react_1.useRef();\n  var autoHeightSetup = react_1.useRef(false);\n\n  var _m = react_1.useState(0),\n      autoHeightSetupAttempt = _m[0],\n      setAutoHeightSetupAttempt = _m[1]; // puts autoHeight onto full with detail rows. this needs trickery, as we need\n  // the HTMLElement for the provided Detail Cell Renderer, however the Detail Cell Renderer\n  // could be a stateless React Func Comp which won't work with useRef, so we need\n  // to poll (we limit to 10) looking for the Detail HTMLElement (which will be the only\n  // child) after the fullWidthCompDetails is set.\n\n\n  react_1.useEffect(function () {\n    var _a;\n\n    if (autoHeightSetup.current) {\n      return;\n    }\n\n    if (!fullWidthCompDetails) {\n      return;\n    }\n\n    if (autoHeightSetupAttempt > 10) {\n      return;\n    }\n\n    var eChild = (_a = eGui.current) === null || _a === void 0 ? void 0 : _a.firstChild;\n\n    if (eChild) {\n      rowCtrl.setupDetailRowAutoHeight(eChild);\n      autoHeightSetup.current = true;\n    } else {\n      setAutoHeightSetupAttempt(function (prev) {\n        return prev + 1;\n      });\n    }\n  }, [fullWidthCompDetails, autoHeightSetupAttempt]);\n  var cssClassManager = react_1.useMemo(function () {\n    return new ag_grid_community_1.CssClassManager(function () {\n      return eGui.current;\n    });\n  }, []);\n  react_1.useEffect(function () {\n    // because React is asychronous, it's possible the RowCtrl is no longer a valid RowCtrl. This can\n    // happen if user calls two API methods one after the other, with the second API invalidating the rows\n    // the first call created. Thus the rows for the first call could still get created even though no longer needed.\n    if (!rowCtrl.isAlive()) {\n      return;\n    }\n\n    var compProxy = {\n      // the rowTop is managed by state, instead of direct style manipulation by rowCtrl (like all the other styles)\n      // as we need to have an initial value when it's placed into he DOM for the first time, for animation to work.\n      setTop: function setTop(value) {\n        return _setTop(value);\n      },\n      setTransform: function setTransform(value) {\n        return _setTransform(value);\n      },\n      // i found using React for managing classes at the row level was to slow, as modifying classes caused a lot of\n      // React code to execute, so avoiding React for managing CSS Classes made the grid go much faster.\n      addOrRemoveCssClass: function addOrRemoveCssClass(name, on) {\n        return cssClassManager.addOrRemoveCssClass(name, on);\n      },\n      setDomOrder: function setDomOrder(domOrder) {\n        return _setDomOrder(domOrder);\n      },\n      setRowIndex: function setRowIndex(value) {\n        return _setRowIndex(value);\n      },\n      setRowId: function setRowId(value) {\n        return _setRowId(value);\n      },\n      setRowBusinessKey: function setRowBusinessKey(value) {\n        return _setRowBusinessKey(value);\n      },\n      setTabIndex: function setTabIndex(value) {\n        return _setTabIndex(value);\n      },\n      setUserStyles: function setUserStyles(styles) {\n        return _setUserStyles(styles);\n      },\n      setRole: function setRole(value) {\n        return _setRole(value);\n      },\n      // if we don't maintain the order, then cols will be ripped out and into the dom\n      // when cols reordered, which would stop the CSS transitions from working\n      setCellCtrls: function setCellCtrls(next) {\n        return _setCellCtrls(function (prev) {\n          return maintainOrderOnColumns(prev, next, domOrder);\n        });\n      },\n      showFullWidth: function showFullWidth(compDetails) {\n        return setFullWidthCompDetails(compDetails);\n      },\n      getFullWidthCellRenderer: function getFullWidthCellRenderer() {\n        return fullWidthCompRef.current;\n      }\n    };\n    rowCtrl.setComp(compProxy, eGui.current, containerType);\n  }, []);\n  react_1.useEffect(function () {\n    return jsComp_1.showJsComp(fullWidthCompDetails, context, eGui.current, fullWidthCompRef);\n  }, [fullWidthCompDetails]);\n  var rowStyles = react_1.useMemo(function () {\n    var res = {\n      top: top,\n      transform: transform\n    };\n    Object.assign(res, userStyles);\n    return res;\n  }, [top, transform, userStyles]);\n  var showFullWidthFramework = fullWidthCompDetails && fullWidthCompDetails.componentFromFramework;\n  var showCells = cellCtrls != null;\n  var reactFullWidthCellRendererStateless = react_1.useMemo(function () {\n    var _a;\n\n    var res = ((_a = fullWidthCompDetails) === null || _a === void 0 ? void 0 : _a.componentFromFramework) && utils_1.isComponentStateless(fullWidthCompDetails.componentClass);\n    return !!res;\n  }, [fullWidthCompDetails]);\n\n  var showCellsJsx = function showCellsJsx() {\n    return cellCtrls.list.map(function (cellCtrl) {\n      return react_1.default.createElement(cellComp_1.default, {\n        cellCtrl: cellCtrl,\n        editingRow: rowCtrl.isEditing(),\n        printLayout: rowCtrl.isPrintLayout(),\n        key: cellCtrl.getInstanceId()\n      });\n    });\n  };\n\n  var showFullWidthFrameworkJsx = function showFullWidthFrameworkJsx() {\n    var FullWidthComp = fullWidthCompDetails.componentClass;\n    return react_1.default.createElement(react_1.default.Fragment, null, reactFullWidthCellRendererStateless && react_1.default.createElement(FullWidthComp, __assign({}, fullWidthCompDetails.params)), !reactFullWidthCellRendererStateless && react_1.default.createElement(FullWidthComp, __assign({}, fullWidthCompDetails.params, {\n      ref: fullWidthCompRef\n    })));\n  };\n\n  return react_1.default.createElement(\"div\", {\n    ref: eGui,\n    role: role,\n    style: rowStyles,\n    \"row-index\": rowIndex,\n    \"row-id\": rowId,\n    \"row-business-key\": rowBusinessKey,\n    tabIndex: tabIndex\n  }, showCells && showCellsJsx(), showFullWidthFramework && showFullWidthFrameworkJsx());\n};\n\nexports.default = react_1.memo(RowComp);","map":{"version":3,"sources":["/home/fraction/Music/Vsumm_webapp/node_modules/ag-grid-react/lib/reactUi/rows/rowComp.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__spreadArrays","il","r","Array","k","a","j","jl","__importStar","mod","__esModule","result","__importDefault","defineProperty","exports","value","react_1","require","ag_grid_community_1","jsComp_1","utils_1","beansContext_1","cellComp_1","maintainOrderOnColumns","prev","next","domOrder","res_1","list","instanceIdMap","Map","forEach","c","set","getInstanceId","oldCellCtrls","newCellCtrls","newInstanceIdMap","tempMap","instanceId","has","push","res","RowComp","params","context","useContext","BeansContext","rowCtrl","containerType","_a","useState","rowIndex","setRowIndex","_b","rowId","setRowId","_c","role","setRole","_d","rowBusinessKey","setRowBusinessKey","_e","tabIndex","setTabIndex","_f","userStyles","setUserStyles","_g","cellCtrls","setCellCtrls","_h","fullWidthCompDetails","setFullWidthCompDetails","_j","setDomOrder","_k","getInitialRowTop","top","setTop","_l","getInitialTransform","transform","setTransform","eGui","useRef","fullWidthCompRef","autoHeightSetup","_m","autoHeightSetupAttempt","setAutoHeightSetupAttempt","useEffect","current","eChild","firstChild","setupDetailRowAutoHeight","cssClassManager","useMemo","CssClassManager","isAlive","compProxy","addOrRemoveCssClass","name","on","styles","showFullWidth","compDetails","getFullWidthCellRenderer","setComp","showJsComp","rowStyles","showFullWidthFramework","componentFromFramework","showCells","reactFullWidthCellRendererStateless","isComponentStateless","componentClass","showCellsJsx","map","cellCtrl","default","createElement","editingRow","isEditing","printLayout","isPrintLayout","key","showFullWidthFrameworkJsx","FullWidthComp","Fragment","ref","style","memo"],"mappings":"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","sourcesContent":["// ag-grid-react v27.1.0\n\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = __importStar(require(\"react\"));\nvar ag_grid_community_1 = require(\"ag-grid-community\");\nvar jsComp_1 = require(\"../jsComp\");\nvar utils_1 = require(\"../utils\");\nvar beansContext_1 = require(\"../beansContext\");\nvar cellComp_1 = __importDefault(require(\"../cells/cellComp\"));\nvar maintainOrderOnColumns = function (prev, next, domOrder) {\n    if (domOrder) {\n        var res_1 = { list: next, instanceIdMap: new Map() };\n        next.forEach(function (c) { return res_1.instanceIdMap.set(c.getInstanceId(), c); });\n        return res_1;\n    }\n    // if dom order not important, we don't want to change the order\n    // of the elements in the dom, as this would break transition styles\n    var oldCellCtrls = [];\n    var newCellCtrls = [];\n    var newInstanceIdMap = new Map();\n    var tempMap = new Map();\n    next.forEach(function (c) { return tempMap.set(c.getInstanceId(), c); });\n    prev.list.forEach(function (c) {\n        var instanceId = c.getInstanceId();\n        if (tempMap.has(instanceId)) {\n            oldCellCtrls.push(c);\n            newInstanceIdMap.set(instanceId, c);\n        }\n    });\n    next.forEach(function (c) {\n        var instanceId = c.getInstanceId();\n        if (!prev.instanceIdMap.has(instanceId)) {\n            newCellCtrls.push(c);\n            newInstanceIdMap.set(instanceId, c);\n        }\n    });\n    var res = {\n        list: __spreadArrays(oldCellCtrls, newCellCtrls),\n        instanceIdMap: newInstanceIdMap\n    };\n    return res;\n};\nvar RowComp = function (params) {\n    var context = react_1.useContext(beansContext_1.BeansContext).context;\n    var rowCtrl = params.rowCtrl, containerType = params.containerType;\n    var _a = react_1.useState(), rowIndex = _a[0], setRowIndex = _a[1];\n    var _b = react_1.useState(), rowId = _b[0], setRowId = _b[1];\n    var _c = react_1.useState(), role = _c[0], setRole = _c[1];\n    var _d = react_1.useState(), rowBusinessKey = _d[0], setRowBusinessKey = _d[1];\n    var _e = react_1.useState(), tabIndex = _e[0], setTabIndex = _e[1];\n    var _f = react_1.useState(), userStyles = _f[0], setUserStyles = _f[1];\n    var _g = react_1.useState({ list: [], instanceIdMap: new Map() }), cellCtrls = _g[0], setCellCtrls = _g[1];\n    var _h = react_1.useState(), fullWidthCompDetails = _h[0], setFullWidthCompDetails = _h[1];\n    var _j = react_1.useState(false), domOrder = _j[0], setDomOrder = _j[1];\n    // these styles have initial values, so element is placed into the DOM with them,\n    // rather than an transition getting applied.\n    var _k = react_1.useState(rowCtrl.getInitialRowTop()), top = _k[0], setTop = _k[1];\n    var _l = react_1.useState(rowCtrl.getInitialTransform()), transform = _l[0], setTransform = _l[1];\n    var eGui = react_1.useRef(null);\n    var fullWidthCompRef = react_1.useRef();\n    var autoHeightSetup = react_1.useRef(false);\n    var _m = react_1.useState(0), autoHeightSetupAttempt = _m[0], setAutoHeightSetupAttempt = _m[1];\n    // puts autoHeight onto full with detail rows. this needs trickery, as we need\n    // the HTMLElement for the provided Detail Cell Renderer, however the Detail Cell Renderer\n    // could be a stateless React Func Comp which won't work with useRef, so we need\n    // to poll (we limit to 10) looking for the Detail HTMLElement (which will be the only\n    // child) after the fullWidthCompDetails is set.\n    react_1.useEffect(function () {\n        var _a;\n        if (autoHeightSetup.current) {\n            return;\n        }\n        if (!fullWidthCompDetails) {\n            return;\n        }\n        if (autoHeightSetupAttempt > 10) {\n            return;\n        }\n        var eChild = (_a = eGui.current) === null || _a === void 0 ? void 0 : _a.firstChild;\n        if (eChild) {\n            rowCtrl.setupDetailRowAutoHeight(eChild);\n            autoHeightSetup.current = true;\n        }\n        else {\n            setAutoHeightSetupAttempt(function (prev) { return prev + 1; });\n        }\n    }, [fullWidthCompDetails, autoHeightSetupAttempt]);\n    var cssClassManager = react_1.useMemo(function () { return new ag_grid_community_1.CssClassManager(function () { return eGui.current; }); }, []);\n    react_1.useEffect(function () {\n        // because React is asychronous, it's possible the RowCtrl is no longer a valid RowCtrl. This can\n        // happen if user calls two API methods one after the other, with the second API invalidating the rows\n        // the first call created. Thus the rows for the first call could still get created even though no longer needed.\n        if (!rowCtrl.isAlive()) {\n            return;\n        }\n        var compProxy = {\n            // the rowTop is managed by state, instead of direct style manipulation by rowCtrl (like all the other styles)\n            // as we need to have an initial value when it's placed into he DOM for the first time, for animation to work.\n            setTop: function (value) { return setTop(value); },\n            setTransform: function (value) { return setTransform(value); },\n            // i found using React for managing classes at the row level was to slow, as modifying classes caused a lot of\n            // React code to execute, so avoiding React for managing CSS Classes made the grid go much faster.\n            addOrRemoveCssClass: function (name, on) { return cssClassManager.addOrRemoveCssClass(name, on); },\n            setDomOrder: function (domOrder) { return setDomOrder(domOrder); },\n            setRowIndex: function (value) { return setRowIndex(value); },\n            setRowId: function (value) { return setRowId(value); },\n            setRowBusinessKey: function (value) { return setRowBusinessKey(value); },\n            setTabIndex: function (value) { return setTabIndex(value); },\n            setUserStyles: function (styles) { return setUserStyles(styles); },\n            setRole: function (value) { return setRole(value); },\n            // if we don't maintain the order, then cols will be ripped out and into the dom\n            // when cols reordered, which would stop the CSS transitions from working\n            setCellCtrls: function (next) { return setCellCtrls(function (prev) { return maintainOrderOnColumns(prev, next, domOrder); }); },\n            showFullWidth: function (compDetails) { return setFullWidthCompDetails(compDetails); },\n            getFullWidthCellRenderer: function () { return fullWidthCompRef.current; },\n        };\n        rowCtrl.setComp(compProxy, eGui.current, containerType);\n    }, []);\n    react_1.useEffect(function () { return jsComp_1.showJsComp(fullWidthCompDetails, context, eGui.current, fullWidthCompRef); }, [fullWidthCompDetails]);\n    var rowStyles = react_1.useMemo(function () {\n        var res = { top: top, transform: transform };\n        Object.assign(res, userStyles);\n        return res;\n    }, [top, transform, userStyles]);\n    var showFullWidthFramework = fullWidthCompDetails && fullWidthCompDetails.componentFromFramework;\n    var showCells = cellCtrls != null;\n    var reactFullWidthCellRendererStateless = react_1.useMemo(function () {\n        var _a;\n        var res = ((_a = fullWidthCompDetails) === null || _a === void 0 ? void 0 : _a.componentFromFramework) && utils_1.isComponentStateless(fullWidthCompDetails.componentClass);\n        return !!res;\n    }, [fullWidthCompDetails]);\n    var showCellsJsx = function () { return cellCtrls.list.map(function (cellCtrl) { return (react_1.default.createElement(cellComp_1.default, { cellCtrl: cellCtrl, editingRow: rowCtrl.isEditing(), printLayout: rowCtrl.isPrintLayout(), key: cellCtrl.getInstanceId() })); }); };\n    var showFullWidthFrameworkJsx = function () {\n        var FullWidthComp = fullWidthCompDetails.componentClass;\n        return (react_1.default.createElement(react_1.default.Fragment, null,\n            reactFullWidthCellRendererStateless\n                && react_1.default.createElement(FullWidthComp, __assign({}, fullWidthCompDetails.params)),\n            !reactFullWidthCellRendererStateless\n                && react_1.default.createElement(FullWidthComp, __assign({}, fullWidthCompDetails.params, { ref: fullWidthCompRef }))));\n    };\n    return (react_1.default.createElement(\"div\", { ref: eGui, role: role, style: rowStyles, \"row-index\": rowIndex, \"row-id\": rowId, \"row-business-key\": rowBusinessKey, tabIndex: tabIndex },\n        showCells && showCellsJsx(),\n        showFullWidthFramework && showFullWidthFrameworkJsx()));\n};\nexports.default = react_1.memo(RowComp);\n"]},"metadata":{},"sourceType":"script"}